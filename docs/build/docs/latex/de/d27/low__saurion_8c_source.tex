\hypertarget{low__saurion_8c_source}{}\doxysection{low\+\_\+saurion.\+c}
\label{low__saurion_8c_source}\index{/\_\_w/saurion/saurion/src/low\_saurion.c@{/\_\_w/saurion/saurion/src/low\_saurion.c}}
\mbox{\hyperlink{low__saurion_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{low__saurion_8h}{low\_saurion.h}}"{}}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00003}00003 \textcolor{preprocessor}{\#include <netinet/in.h>}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00004}00004 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00005}00005 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00006}00006 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00007}00007 \textcolor{preprocessor}{\#include <sys/eventfd.h>}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00009}\mbox{\hyperlink{low__saurion_8c_a96a7a2db32d44325af7e4db5fe599675}{00009}} \textcolor{preprocessor}{\#define EVENT\_TYPE\_ACCEPT 0  }}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00010}\mbox{\hyperlink{low__saurion_8c_a1f7c29ac665cde9aa26808bb269837d9}{00010}} \textcolor{preprocessor}{\#define EVENT\_TYPE\_READ 1    }}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00011}\mbox{\hyperlink{low__saurion_8c_a387dc1b3761c4fd9e9b40030bc5b78c8}{00011}} \textcolor{preprocessor}{\#define EVENT\_TYPE\_WRITE 2   }}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00012}\mbox{\hyperlink{low__saurion_8c_a59fc72da421a569911ec34c1c0537e9d}{00012}} \textcolor{preprocessor}{\#define EVENT\_TYPE\_WAIT 3    }}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00013}\mbox{\hyperlink{low__saurion_8c_a7a838ec11db7afb74af46c55e0cb6e43}{00013}} \textcolor{preprocessor}{\#define EVENT\_TYPE\_ERROR 4   }}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00015}\mbox{\hyperlink{structrequest}{00015}} \textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00016}\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{00016}}   \textcolor{keywordtype}{void} *\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00017}\mbox{\hyperlink{structrequest_a02dc8e759c5216e1b7f7c908a0e0481f}{00017}}   \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structrequest_a02dc8e759c5216e1b7f7c908a0e0481f}{prev\_size}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00018}\mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{00018}}   \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{prev\_remain}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00019}\mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{00019}}   \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{next\_iov}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00020}\mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{00020}}   \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{next\_offset}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00021}\mbox{\hyperlink{structrequest_a9cba15f1748716ffe6869a271c1ccc4d}{00021}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{structrequest_a9cba15f1748716ffe6869a271c1ccc4d}{event\_type}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00022}\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{00022}}   \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00023}\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{00023}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00024}\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{00024}}   \textcolor{keyword}{struct }iovec \mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[];}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00025}00025 \};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00027}\mbox{\hyperlink{low__saurion_8c_a3acffbd305ee72dcd4593c0d8af64a4f}{00027}} \textcolor{preprocessor}{\#define MIN(a, b) ((a) < (b) ? (a) : (b))}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00028}\mbox{\hyperlink{low__saurion_8c_afa99ec4acc4ecb2dc3c2d05da15d0e3f}{00028}} \textcolor{preprocessor}{\#define MAX(a, b) ((a) > (b) ? (a) : (b))}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00029}\mbox{\hyperlink{low__saurion_8c_adcba6f6935d1807493e731cc5e79a661}{00029}} pthread\_mutex\_t \mbox{\hyperlink{low__saurion_8c_adcba6f6935d1807493e731cc5e79a661}{print\_mutex}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00031}\mbox{\hyperlink{structsaurion__wrapper}{00031}} \textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion__wrapper}{saurion\_wrapper}} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00032}\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{00032}}   \textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion}{saurion}} *\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00033}\mbox{\hyperlink{structsaurion__wrapper_ad3843f75839e1a93e425fe4563a23286}{00033}}   uint32\_t \mbox{\hyperlink{structsaurion__wrapper_ad3843f75839e1a93e425fe4563a23286}{sel}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00034}00034 \};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00036}\mbox{\hyperlink{low__saurion_8c_a7919e576d3fdccbefb75bee92abd5cc3}{00036}} \textcolor{keyword}{static} uint32\_t \mbox{\hyperlink{low__saurion_8c_a7919e576d3fdccbefb75bee92abd5cc3}{next}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *s) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00037}00037   s-\/>\mbox{\hyperlink{structsaurion_a2742eddc30d4e4409b9f1a98cf7eb054}{next}} = (s-\/>\mbox{\hyperlink{structsaurion_a2742eddc30d4e4409b9f1a98cf7eb054}{next}} + 1) \% s-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00038}00038   \textcolor{keywordflow}{return} s-\/>\mbox{\hyperlink{structsaurion_a2742eddc30d4e4409b9f1a98cf7eb054}{next}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00039}00039 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00041}\mbox{\hyperlink{low__saurion_8c_a00d80bc019becac44a598996923faecf}{00041}} \textcolor{keyword}{static} uint64\_t \mbox{\hyperlink{low__saurion_8c_a00d80bc019becac44a598996923faecf}{htonll}}(uint64\_t value) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00042}00042   \textcolor{keywordtype}{int} num = 42;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00043}00043   \textcolor{keywordflow}{if} (*(\textcolor{keywordtype}{char} *)\&num == 42) \{  \textcolor{comment}{// Little endian check}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00044}00044     uint32\_t high\_part = htonl((uint32\_t)(value >> 32));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00045}00045     uint32\_t low\_part = htonl((uint32\_t)(value \& 0xFFFFFFFFLL));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00046}00046     \textcolor{keywordflow}{return} ((uint64\_t)low\_part << 32) | high\_part;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00047}00047   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00048}00048   \textcolor{keywordflow}{return} value;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00049}00049 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00050}00050 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00051}\mbox{\hyperlink{low__saurion_8c_a5fae4cad12b0ca469184e097624aea08}{00051}} \textcolor{keyword}{static} uint64\_t \mbox{\hyperlink{low__saurion_8c_a5fae4cad12b0ca469184e097624aea08}{ntohll}}(uint64\_t value) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00052}00052   \textcolor{keywordtype}{int} num = 42;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00053}00053   \textcolor{keywordflow}{if} (*(\textcolor{keywordtype}{char} *)\&num == 42) \{  \textcolor{comment}{// Little endian check}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00054}00054     uint32\_t high\_part = ntohl((uint32\_t)(value >> 32));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00055}00055     uint32\_t low\_part = ntohl((uint32\_t)(value \& 0xFFFFFFFFLL));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00056}00056     \textcolor{keywordflow}{return} ((uint64\_t)low\_part << 32) | high\_part;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00057}00057   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00058}00058   \textcolor{keywordflow}{return} value;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00059}00059 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00061}\mbox{\hyperlink{group__LowSaurion_ga0f9760bc800b946244ccf790081e6bb3}{00061}} \textcolor{keywordtype}{void} \mbox{\hyperlink{group__LowSaurion_ga0f9760bc800b946244ccf790081e6bb3}{free\_request}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structrequest}{request}} *req, \textcolor{keywordtype}{void} **children\_ptr, \textcolor{keywordtype}{size\_t} amount) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00062}00062   \textcolor{keywordflow}{if} (children\_ptr) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00063}00063     free(children\_ptr);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00064}00064     children\_ptr = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00065}00065   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00066}00066   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < amount; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00067}00067     free(req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[i].iov\_base);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00068}00068     req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[i].iov\_base = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00069}00069   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00070}00070   free(req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00071}00071   req = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00072}00072   free(children\_ptr);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00073}00073   children\_ptr = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00074}00074 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00076}00076 [[nodiscard]]}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00077}\mbox{\hyperlink{group__LowSaurion_gae64e81c0ce5f52d51684d8f1129e6076}{00077}} \textcolor{keywordtype}{int} \mbox{\hyperlink{group__LowSaurion_gae64e81c0ce5f52d51684d8f1129e6076}{initialize\_iovec}}(\textcolor{keyword}{struct} iovec *iov, \textcolor{keywordtype}{size\_t} amount, \textcolor{keywordtype}{size\_t} pos, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *msg, \textcolor{keywordtype}{size\_t} size,}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00078}00078                      uint8\_t h) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00079}00079   \textcolor{keywordflow}{if} (!iov || !iov-\/>iov\_base) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00080}00080     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00081}00081   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00082}00082   \textcolor{keywordflow}{if} (msg) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00083}00083     \textcolor{keywordtype}{size\_t} len = iov-\/>iov\_len;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00084}00084     \textcolor{keywordtype}{char} *dest = (\textcolor{keywordtype}{char} *)iov-\/>iov\_base;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00085}00085     \textcolor{keywordtype}{char} *orig = (\textcolor{keywordtype}{char} *)msg + pos * CHUNK\_SZ;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00086}00086     \textcolor{keywordtype}{size\_t} cpy\_sz = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00087}00087     \textcolor{keywordflow}{if} (h) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00088}00088       \textcolor{keywordflow}{if} (pos == 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00089}00089         uint64\_t send\_size = \mbox{\hyperlink{low__saurion_8c_a00d80bc019becac44a598996923faecf}{htonll}}(size);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00090}00090         memcpy(dest, \&send\_size, \textcolor{keyword}{sizeof}(uint64\_t));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00091}00091         dest += \textcolor{keyword}{sizeof}(uint64\_t);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00092}00092         len -\/= \textcolor{keyword}{sizeof}(uint64\_t);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00093}00093       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00094}00094         orig -\/= \textcolor{keyword}{sizeof}(uint64\_t);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00095}00095       \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00096}00096       \textcolor{keywordflow}{if} ((pos + 1) == amount) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00097}00097         -\/-\/len;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00098}00098         cpy\_sz = (len < size ? len : size);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00099}00099         dest[cpy\_sz] = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00100}00100       \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00101}00101     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00102}00102     cpy\_sz = (len < size ? len : size);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00103}00103     memcpy(dest, orig, cpy\_sz);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00104}00104     dest += cpy\_sz;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00105}00105     \textcolor{keywordtype}{size\_t} rem = CHUNK\_SZ -\/ (dest -\/ (\textcolor{keywordtype}{char} *)iov-\/>iov\_base);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00106}00106     memset(dest, 0, rem);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00107}00107   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00108}00108     memset((\textcolor{keywordtype}{char} *)iov-\/>iov\_base, 0, CHUNK\_SZ);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00109}00109   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00110}00110   \textcolor{keywordflow}{return} SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00111}00111 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00112}00112 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00113}00113 [[nodiscard]]}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00114}\mbox{\hyperlink{group__LowSaurion_ga1c329b9155a9159b696b60247c9b328b}{00114}} \textcolor{keywordtype}{int} \mbox{\hyperlink{group__LowSaurion_ga1c329b9155a9159b696b60247c9b328b}{allocate\_iovec}}(\textcolor{keyword}{struct} iovec *iov, \textcolor{keywordtype}{size\_t} amount, \textcolor{keywordtype}{size\_t} pos, \textcolor{keywordtype}{size\_t} size, \textcolor{keywordtype}{void} **chd\_ptr) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00115}00115   \textcolor{keywordflow}{if} (!iov || !chd\_ptr) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00116}00116     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00117}00117   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00118}00118   iov-\/>iov\_base = malloc(CHUNK\_SZ);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00119}00119   \textcolor{keywordflow}{if} (!iov-\/>iov\_base) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00120}00120     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00121}00121   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00122}00122   iov-\/>iov\_len = (pos == (amount -\/ 1) ? (size \% CHUNK\_SZ) : CHUNK\_SZ);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00123}00123   \textcolor{keywordflow}{if} (iov-\/>iov\_len == 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00124}00124     iov-\/>iov\_len = CHUNK\_SZ;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00125}00125   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00126}00126   chd\_ptr[pos] = iov-\/>iov\_base;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00127}00127   \textcolor{keywordflow}{return} SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00128}00128 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00129}00129 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00130}00130 [[nodiscard]]}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00131}\mbox{\hyperlink{group__LowSaurion_gaddb696f3c38e160dde5a5de6e6e10f70}{00131}} \textcolor{keywordtype}{int} \mbox{\hyperlink{group__LowSaurion_gaddb696f3c38e160dde5a5de6e6e10f70}{set\_request}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structrequest}{request}} **r, \textcolor{keyword}{struct} \mbox{\hyperlink{structNode}{Node}} **l, \textcolor{keywordtype}{size\_t} s, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *m, uint8\_t h) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00132}00132   uint64\_t full\_size = s;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00133}00133   \textcolor{keywordflow}{if} (h) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00134}00134     full\_size += (\textcolor{keyword}{sizeof}(uint64\_t) + 1);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00135}00135   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00136}00136   \textcolor{keywordtype}{size\_t} amount = full\_size / CHUNK\_SZ;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00137}00137   amount = amount + (full\_size \% CHUNK\_SZ == 0 ? 0 : 1);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00138}00138   \textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *temp =}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00139}00139       (\textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *)malloc(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \mbox{\hyperlink{structrequest}{request}}) + \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct }iovec) * amount);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00140}00140   \textcolor{keywordflow}{if} (!temp) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00141}00141     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00142}00142   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00143}00143   \textcolor{keywordflow}{if} (!*r) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00144}00144     *r = temp;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00145}00145     (*r)-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}} = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00146}00146     (*r)-\/>prev\_size = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00147}00147     (*r)-\/>prev\_remain = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00148}00148     (*r)-\/>next\_iov = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00149}00149     (*r)-\/>next\_offset = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00150}00150   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00151}00151     temp-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}} = (*r)-\/>client\_socket;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00152}00152     temp-\/>\mbox{\hyperlink{structrequest_a9cba15f1748716ffe6869a271c1ccc4d}{event\_type}} = (*r)-\/>event\_type;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00153}00153     temp-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}} = (*r)-\/>prev;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00154}00154     temp-\/>\mbox{\hyperlink{structrequest_a02dc8e759c5216e1b7f7c908a0e0481f}{prev\_size}} = (*r)-\/>prev\_size;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00155}00155     temp-\/>\mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{prev\_remain}} = (*r)-\/>prev\_remain;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00156}00156     temp-\/>\mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{next\_iov}} = (*r)-\/>next\_iov;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00157}00157     temp-\/>\mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{next\_offset}} = (*r)-\/>next\_offset;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00158}00158     *r = temp;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00159}00159   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00160}00160   \textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *req = *r;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00161}00161   req-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}} = (int)amount;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00162}00162   \textcolor{keywordtype}{void} **children\_ptr = (\textcolor{keywordtype}{void} **)malloc(amount * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void} *));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00163}00163   \textcolor{keywordflow}{if} (!children\_ptr) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00164}00164     \mbox{\hyperlink{group__LowSaurion_ga0f9760bc800b946244ccf790081e6bb3}{free\_request}}(req, children\_ptr, 0);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00165}00165     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00166}00166   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00167}00167   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < amount; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00168}00168     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__LowSaurion_ga1c329b9155a9159b696b60247c9b328b}{allocate\_iovec}}(\&req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[i], amount, i, full\_size, children\_ptr)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00169}00169       \mbox{\hyperlink{group__LowSaurion_ga0f9760bc800b946244ccf790081e6bb3}{free\_request}}(req, children\_ptr, amount);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00170}00170       \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00171}00171     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00172}00172     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__LowSaurion_gae64e81c0ce5f52d51684d8f1129e6076}{initialize\_iovec}}(\&req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[i], amount, i, m, s, h)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00173}00173       \mbox{\hyperlink{group__LowSaurion_ga0f9760bc800b946244ccf790081e6bb3}{free\_request}}(req, children\_ptr, amount);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00174}00174       \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00175}00175     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00176}00176   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00177}00177   \textcolor{keywordflow}{if} (\mbox{\hyperlink{linked__list_8c_aee07283e23385804a1d3f880cd99731e}{list\_insert}}(l, req, amount, children\_ptr)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00178}00178     \mbox{\hyperlink{group__LowSaurion_ga0f9760bc800b946244ccf790081e6bb3}{free\_request}}(req, children\_ptr, amount);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00179}00179     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00180}00180   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00181}00181   free(children\_ptr);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00182}00182   \textcolor{keywordflow}{return} SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00183}00183 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00184}00184 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00185}00185 \textcolor{comment}{/*********************************** ADDERS ***********************************/}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00186}\mbox{\hyperlink{low__saurion_8c_a40aa700cf97b0ad654fe0aff06644ae9}{00186}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a40aa700cf97b0ad654fe0aff06644ae9}{add\_accept}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keyword}{const} \textcolor{keyword}{struct} sockaddr\_in *\textcolor{keyword}{const} ca,}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00187}00187                        socklen\_t *\textcolor{keyword}{const} cal) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00188}00188   \textcolor{keywordtype}{int} res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00189}00189   pthread\_mutex\_lock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[0]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00190}00190   \textcolor{keywordflow}{while} (res != SUCCESS\_CODE) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00191}00191     \textcolor{keyword}{struct }io\_uring\_sqe *sqe = io\_uring\_get\_sqe(\&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[0]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00192}00192     \textcolor{keywordflow}{while} (!sqe) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00193}00193       sqe = io\_uring\_get\_sqe(\&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[0]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00194}00194       usleep(TIMEOUT\_RETRY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00195}00195     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00196}00196     \textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *req = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00197}00197     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__LowSaurion_gaddb696f3c38e160dde5a5de6e6e10f70}{set\_request}}(\&req, \&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, 0, NULL, 0)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00198}00198       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00199}00199       usleep(TIMEOUT\_RETRY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00200}00200       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00201}00201       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00202}00202     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00203}00203     req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00204}00204     req-\/>\mbox{\hyperlink{structrequest_a9cba15f1748716ffe6869a271c1ccc4d}{event\_type}} = \mbox{\hyperlink{low__saurion_8c_a96a7a2db32d44325af7e4db5fe599675}{EVENT\_TYPE\_ACCEPT}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00205}00205     io\_uring\_prep\_accept(sqe, s-\/>\mbox{\hyperlink{structsaurion_ae85c8eed456efd00dcc93d005b0ad99c}{ss}}, (\textcolor{keyword}{struct} sockaddr *)ca, cal, 0);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00206}00206     io\_uring\_sqe\_set\_data(sqe, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00207}00207     \textcolor{keywordflow}{if} (io\_uring\_submit(\&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[0]) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00208}00208       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00209}00209       \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00210}00210       usleep(TIMEOUT\_RETRY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00211}00211       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00212}00212       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00213}00213     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00214}00214     res = SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00215}00215   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00216}00216   pthread\_mutex\_unlock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[0]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00217}00217 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00218}00218 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00219}\mbox{\hyperlink{low__saurion_8c_a2794e5aada66af40962e04b938bbd88a}{00219}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a2794e5aada66af40962e04b938bbd88a}{add\_efd}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}, \textcolor{keywordtype}{int} sel) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00220}00220   pthread\_mutex\_lock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[sel]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00221}00221   \textcolor{keywordtype}{int} res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00222}00222   \textcolor{keywordflow}{while} (res != SUCCESS\_CODE) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00223}00223     \textcolor{keyword}{struct }io\_uring *ring = \&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[sel];}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00224}00224     \textcolor{keyword}{struct }io\_uring\_sqe *sqe = io\_uring\_get\_sqe(ring);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00225}00225     \textcolor{keywordflow}{while} (!sqe) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00226}00226       sqe = io\_uring\_get\_sqe(ring);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00227}00227       usleep(TIMEOUT\_RETRY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00228}00228     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00229}00229     \textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *req = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00230}00230     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__LowSaurion_gaddb696f3c38e160dde5a5de6e6e10f70}{set\_request}}(\&req, \&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, CHUNK\_SZ, NULL, 0)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00231}00231       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00232}00232       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00233}00233       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00234}00234     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00235}00235     req-\/>\mbox{\hyperlink{structrequest_a9cba15f1748716ffe6869a271c1ccc4d}{event\_type}} = \mbox{\hyperlink{low__saurion_8c_a1f7c29ac665cde9aa26808bb269837d9}{EVENT\_TYPE\_READ}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00236}00236     req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}} = \mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00237}00237     io\_uring\_prep\_readv(sqe, \mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}, \&req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[0], req-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}}, 0);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00238}00238     io\_uring\_sqe\_set\_data(sqe, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00239}00239     \textcolor{keywordflow}{if} (io\_uring\_submit(ring) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00240}00240       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00241}00241       \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00242}00242       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00243}00243       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00244}00244     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00245}00245     res = SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00246}00246   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00247}00247   pthread\_mutex\_unlock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[sel]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00248}00248 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00249}00249 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00250}\mbox{\hyperlink{low__saurion_8c_a2299a2be116729fdb774a5e655ff9f83}{00250}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a2299a2be116729fdb774a5e655ff9f83}{add\_read}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00251}00251   \textcolor{keywordtype}{int} sel = \mbox{\hyperlink{low__saurion_8c_a7919e576d3fdccbefb75bee92abd5cc3}{next}}(s);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00252}00252   \textcolor{keywordtype}{int} res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00253}00253   pthread\_mutex\_lock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[sel]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00254}00254   \textcolor{keywordflow}{while} (res != SUCCESS\_CODE) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00255}00255     \textcolor{keyword}{struct }io\_uring *ring = \&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[sel];}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00256}00256     \textcolor{keyword}{struct }io\_uring\_sqe *sqe = io\_uring\_get\_sqe(ring);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00257}00257     \textcolor{keywordflow}{while} (!sqe) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00258}00258       sqe = io\_uring\_get\_sqe(ring);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00259}00259       usleep(TIMEOUT\_RETRY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00260}00260     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00261}00261     \textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *req = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00262}00262     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__LowSaurion_gaddb696f3c38e160dde5a5de6e6e10f70}{set\_request}}(\&req, \&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, CHUNK\_SZ, NULL, 0)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00263}00263       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00264}00264       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00265}00265       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00266}00266     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00267}00267     req-\/>\mbox{\hyperlink{structrequest_a9cba15f1748716ffe6869a271c1ccc4d}{event\_type}} = \mbox{\hyperlink{low__saurion_8c_a1f7c29ac665cde9aa26808bb269837d9}{EVENT\_TYPE\_READ}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00268}00268     req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}} = \mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00269}00269     io\_uring\_prep\_readv(sqe, \mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}, \&req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[0], req-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}}, 0);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00270}00270     io\_uring\_sqe\_set\_data(sqe, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00271}00271     \textcolor{keywordflow}{if} (io\_uring\_submit(ring) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00272}00272       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00273}00273       \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00274}00274       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00275}00275       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00276}00276     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00277}00277     res = SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00278}00278   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00279}00279   pthread\_mutex\_unlock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[sel]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00280}00280 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00281}00281 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00282}\mbox{\hyperlink{low__saurion_8c_ab40f6349969e5ce57e654ddb9eaf827a}{00282}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_ab40f6349969e5ce57e654ddb9eaf827a}{add\_read\_continue}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keyword}{struct} \mbox{\hyperlink{structrequest}{request}} *oreq, \textcolor{keyword}{const} \textcolor{keywordtype}{int} sel) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00283}00283   pthread\_mutex\_lock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[sel]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00284}00284   \textcolor{keywordtype}{int} res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00285}00285   \textcolor{keywordflow}{while} (res != SUCCESS\_CODE) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00286}00286     \textcolor{keyword}{struct }io\_uring *ring = \&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[sel];}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00287}00287     \textcolor{keyword}{struct }io\_uring\_sqe *sqe = io\_uring\_get\_sqe(ring);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00288}00288     \textcolor{keywordflow}{while} (!sqe) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00289}00289       sqe = io\_uring\_get\_sqe(ring);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00290}00290       usleep(TIMEOUT\_RETRY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00291}00291     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00292}00292     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__LowSaurion_gaddb696f3c38e160dde5a5de6e6e10f70}{set\_request}}(\&oreq, \&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, oreq-\/>\mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{prev\_remain}}, NULL, 0)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00293}00293       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00294}00294       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00295}00295       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00296}00296     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00297}00297     io\_uring\_prep\_readv(sqe, oreq-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}, \&oreq-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[0], oreq-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}}, 0);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00298}00298     io\_uring\_sqe\_set\_data(sqe, oreq);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00299}00299     \textcolor{keywordflow}{if} (io\_uring\_submit(ring) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00300}00300       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00301}00301       \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, oreq);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00302}00302       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00303}00303       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00304}00304     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00305}00305     res = SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00306}00306   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00307}00307   pthread\_mutex\_unlock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[sel]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00308}00308 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00309}00309 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00310}\mbox{\hyperlink{low__saurion_8c_a39042ff39576b4db8db514acd6e9a224}{00310}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a39042ff39576b4db8db514acd6e9a224}{add\_write}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keywordtype}{int} fd, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\textcolor{keyword}{const} str, \textcolor{keyword}{const} \textcolor{keywordtype}{int} sel) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00311}00311   \textcolor{keywordtype}{int} res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00312}00312   pthread\_mutex\_lock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[sel]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00313}00313   \textcolor{keywordflow}{while} (res != SUCCESS\_CODE) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00314}00314     \textcolor{keyword}{struct }io\_uring *ring = \&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[sel];}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00315}00315     \textcolor{keyword}{struct }io\_uring\_sqe *sqe = io\_uring\_get\_sqe(ring);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00316}00316     \textcolor{keywordflow}{while} (!sqe) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00317}00317       sqe = io\_uring\_get\_sqe(ring);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00318}00318       usleep(TIMEOUT\_RETRY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00319}00319     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00320}00320     \textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *req = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00321}00321     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__LowSaurion_gaddb696f3c38e160dde5a5de6e6e10f70}{set\_request}}(\&req, \&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, strlen(str), (\textcolor{keywordtype}{void} *)str, 1)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00322}00322       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00323}00323       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00324}00324       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00325}00325     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00326}00326     req-\/>\mbox{\hyperlink{structrequest_a9cba15f1748716ffe6869a271c1ccc4d}{event\_type}} = \mbox{\hyperlink{low__saurion_8c_a387dc1b3761c4fd9e9b40030bc5b78c8}{EVENT\_TYPE\_WRITE}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00327}00327     req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}} = fd;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00328}00328     io\_uring\_prep\_writev(sqe, req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}, req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}, req-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}}, 0);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00329}00329     io\_uring\_sqe\_set\_data(sqe, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00330}00330     \textcolor{keywordflow}{if} (io\_uring\_submit(ring) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00331}00331       free(sqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00332}00332       \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00333}00333       res = ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00334}00334       usleep(TIMEOUT\_RETRY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00335}00335       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00336}00336     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00337}00337     res = SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00338}00338   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00339}00339   pthread\_mutex\_unlock(\&s-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[sel]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00340}00340 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00341}00341 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00342}00342 \textcolor{comment}{/*********************************** HANDLERS ***********************************/}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00343}\mbox{\hyperlink{low__saurion_8c_aff870d06aed2384abd16b89b4e6429d8}{00343}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_aff870d06aed2384abd16b89b4e6429d8}{handle\_accept}}(\textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keyword}{const} \textcolor{keywordtype}{int} fd) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00344}00344   \textcolor{keywordflow}{if} (s-\/>cb.on\_connected) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00345}00345     s-\/>cb.on\_connected(fd, s-\/>cb.on\_connected\_arg);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00346}00346   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00347}00347 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00348}00348 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00349}00349 [[nodiscard]]}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00350}\mbox{\hyperlink{group__LowSaurion_gaec24df6ee2f4999bf64acf5fc42ed019}{00350}} \textcolor{keywordtype}{int} \mbox{\hyperlink{group__LowSaurion_gaec24df6ee2f4999bf64acf5fc42ed019}{read\_chunk}}(\textcolor{keywordtype}{void} **dest, \textcolor{keywordtype}{size\_t} *len, \textcolor{keyword}{struct} \mbox{\hyperlink{structrequest}{request}} *\textcolor{keyword}{const} req) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00351}00351   \textcolor{comment}{// Initial checks}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00352}00352   \textcolor{keywordflow}{if} (req-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}} == 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00353}00353     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00354}00354   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00355}00355 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00356}00356   \textcolor{comment}{// Initizalization}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00357}00357   \textcolor{keywordtype}{size\_t} max\_iov\_cont = 0;  \textcolor{comment}{//< Total size of request}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00358}00358   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < req-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}}; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00359}00359     max\_iov\_cont += req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[i].iov\_len;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00360}00360   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00361}00361   \textcolor{keywordtype}{size\_t} cont\_sz = 0;       \textcolor{comment}{//< Message content size}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00362}00362   \textcolor{keywordtype}{size\_t} cont\_rem = 0;      \textcolor{comment}{//< Remaining bytes of message content}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00363}00363   \textcolor{keywordtype}{size\_t} curr\_iov = 0;      \textcolor{comment}{//< IOVEC num currently reading}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00364}00364   \textcolor{keywordtype}{size\_t} curr\_iov\_off = 0;  \textcolor{comment}{//< Offset in bytes of the current IOVEC}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00365}00365   \textcolor{keywordtype}{size\_t} dest\_off = 0;      \textcolor{comment}{//< Write offset on the destiny array}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00366}00366   \textcolor{keywordtype}{void} *dest\_ptr = NULL;    \textcolor{comment}{//< Destiny pointer, could be dest or prev}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00367}00367   \textcolor{keywordflow}{if} (req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}} \&\& req-\/>\mbox{\hyperlink{structrequest_a02dc8e759c5216e1b7f7c908a0e0481f}{prev\_size}} \&\& req-\/>\mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{prev\_remain}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00368}00368     \textcolor{comment}{// There's a previous unfinished message}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00369}00369     cont\_sz = req-\/>\mbox{\hyperlink{structrequest_a02dc8e759c5216e1b7f7c908a0e0481f}{prev\_size}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00370}00370     cont\_rem = req-\/>\mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{prev\_remain}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00371}00371     curr\_iov = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00372}00372     curr\_iov\_off = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00373}00373     dest\_off = cont\_sz -\/ cont\_rem;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00374}00374     \textcolor{keywordflow}{if} (cont\_rem <= max\_iov\_cont) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00375}00375       *dest = req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00376}00376       dest\_ptr = *dest;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00377}00377       req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}} = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00378}00378       req-\/>\mbox{\hyperlink{structrequest_a02dc8e759c5216e1b7f7c908a0e0481f}{prev\_size}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00379}00379       req-\/>\mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{prev\_remain}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00380}00380     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00381}00381       dest\_ptr = req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00382}00382       *dest = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00383}00383     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00384}00384   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (req-\/>\mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{next\_iov}} || req-\/>\mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{next\_offset}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00385}00385     \textcolor{comment}{// Reading the next message}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00386}00386     curr\_iov = req-\/>\mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{next\_iov}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00387}00387     curr\_iov\_off = req-\/>\mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{next\_offset}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00388}00388     cont\_sz = *((\textcolor{keywordtype}{size\_t} *)(req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[curr\_iov].iov\_base + curr\_iov\_off));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00389}00389     cont\_sz = \mbox{\hyperlink{low__saurion_8c_a5fae4cad12b0ca469184e097624aea08}{ntohll}}(cont\_sz);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00390}00390     curr\_iov\_off += \textcolor{keyword}{sizeof}(uint64\_t);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00391}00391     cont\_rem = cont\_sz;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00392}00392     dest\_off = cont\_sz -\/ cont\_rem;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00393}00393     \textcolor{keywordflow}{if} ((curr\_iov\_off + cont\_rem + 1) <= max\_iov\_cont) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00394}00394       *dest = malloc(cont\_sz);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00395}00395       dest\_ptr = *dest;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00396}00396     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00397}00397       req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}} = malloc(cont\_sz);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00398}00398       dest\_ptr = req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00399}00399       *dest = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00400}00400       *len = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00401}00401     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00402}00402   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00403}00403     \textcolor{comment}{// Reading the first message}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00404}00404     curr\_iov = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00405}00405     curr\_iov\_off = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00406}00406     cont\_sz = *((\textcolor{keywordtype}{size\_t} *)(req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[curr\_iov].iov\_base + curr\_iov\_off));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00407}00407     cont\_sz = \mbox{\hyperlink{low__saurion_8c_a5fae4cad12b0ca469184e097624aea08}{ntohll}}(cont\_sz);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00408}00408     curr\_iov\_off += \textcolor{keyword}{sizeof}(uint64\_t);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00409}00409     cont\_rem = cont\_sz;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00410}00410     dest\_off = cont\_sz -\/ cont\_rem;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00411}00411     \textcolor{keywordflow}{if} (cont\_rem <= max\_iov\_cont) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00412}00412       *dest = malloc(cont\_sz);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00413}00413       dest\_ptr = *dest;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00414}00414     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00415}00415       req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}} = malloc(cont\_sz);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00416}00416       dest\_ptr = req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00417}00417       *dest = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00418}00418     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00419}00419   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00421}00421   \textcolor{keywordtype}{size\_t} curr\_iov\_msg\_rem = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00422}00422 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00423}00423   \textcolor{comment}{// Copy loop}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00424}00424   uint8\_t ok = 1UL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00425}00425   \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00426}00426     curr\_iov\_msg\_rem = \mbox{\hyperlink{low__saurion_8c_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}}(cont\_rem, (req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[curr\_iov].iov\_len -\/ curr\_iov\_off));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00427}00427     memcpy(dest\_ptr + dest\_off, req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[curr\_iov].iov\_base + curr\_iov\_off, curr\_iov\_msg\_rem);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00428}00428     dest\_off += curr\_iov\_msg\_rem;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00429}00429     curr\_iov\_off += curr\_iov\_msg\_rem;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00430}00430     cont\_rem -\/= curr\_iov\_msg\_rem;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00431}00431     \textcolor{keywordflow}{if} (cont\_rem <= 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00432}00432       \textcolor{comment}{// Finish reading}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00433}00433       \textcolor{keywordflow}{if} (*((uint8\_t *)(req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[curr\_iov].iov\_base + curr\_iov\_off)) != 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00434}00434         ok = 0UL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00435}00435       \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00436}00436       *len = cont\_sz;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00437}00437       ++curr\_iov\_off;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00438}00438       \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00439}00439     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00440}00440     \textcolor{keywordflow}{if} (curr\_iov\_off >= (req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[curr\_iov].iov\_len)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00441}00441       ++curr\_iov;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00442}00442       \textcolor{keywordflow}{if} (curr\_iov == req-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00443}00443         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00444}00444       \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00445}00445       curr\_iov\_off = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00446}00446     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00447}00447   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00448}00448 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00449}00449   \textcolor{comment}{// Update status}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00450}00450   \textcolor{keywordflow}{if} (req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00451}00451     req-\/>\mbox{\hyperlink{structrequest_a02dc8e759c5216e1b7f7c908a0e0481f}{prev\_size}} = cont\_sz;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00452}00452     req-\/>\mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{prev\_remain}} = cont\_rem;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00453}00453     *dest = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00454}00454     len = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00455}00455   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00456}00456     req-\/>\mbox{\hyperlink{structrequest_a02dc8e759c5216e1b7f7c908a0e0481f}{prev\_size}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00457}00457     req-\/>\mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{prev\_remain}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00458}00458   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00459}00459   \textcolor{keywordflow}{if} (curr\_iov < req-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00460}00460     uint64\_t next\_sz = *(uint64\_t *)(req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[curr\_iov].iov\_base + curr\_iov\_off);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00461}00461     \textcolor{keywordflow}{if} ((req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[curr\_iov].iov\_len > curr\_iov\_off) \&\& next\_sz) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00462}00462       req-\/>\mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{next\_iov}} = curr\_iov;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00463}00463       req-\/>\mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{next\_offset}} = curr\_iov\_off;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00464}00464     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00465}00465       req-\/>\mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{next\_iov}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00466}00466       req-\/>\mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{next\_offset}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00467}00467     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00468}00468   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00469}00469 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00470}00470   \textcolor{comment}{// Finish}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00471}00471   \textcolor{keywordflow}{if} (!ok) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00472}00472     \textcolor{comment}{// Esto solo es posible si no se encuentra un 0 al final del la lectura}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00473}00473     \textcolor{comment}{// buscar el siguiente 0 y ... probar fortuna}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00474}00474     free(dest\_ptr);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00475}00475     dest\_ptr = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00476}00476     *dest = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00477}00477     *len = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00478}00478     req-\/>\mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{next\_iov}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00479}00479     req-\/>\mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{next\_offset}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00480}00480     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = curr\_iov; i < req-\/>\mbox{\hyperlink{structrequest_a1291bf32fbcafa3bb4b348578db09a9f}{iovec\_count}}; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00481}00481       \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = curr\_iov\_off; j < req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[i].iov\_len; ++j) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00482}00482         uint8\_t foot = *(uint8\_t *)(req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[i].iov\_base + j);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00483}00483         \textcolor{keywordflow}{if} (foot == 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00484}00484           req-\/>\mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{next\_iov}} = i;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00485}00485           req-\/>\mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{next\_offset}} = (j + 1) \% req-\/>\mbox{\hyperlink{structrequest_ae23ac64f6ae30671afc753260ef411fd}{iov}}[i].iov\_len;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00486}00486           \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00487}00487         \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00488}00488       \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00489}00489     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00490}00490     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00491}00491   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00492}00492   \textcolor{keywordflow}{return} SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00493}00493 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00494}00494 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00495}\mbox{\hyperlink{low__saurion_8c_a97aee33e3c5728a7d986b2f42e7bb82a}{00495}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a97aee33e3c5728a7d986b2f42e7bb82a}{handle\_read}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keyword}{struct} \mbox{\hyperlink{structrequest}{request}} *\textcolor{keyword}{const} req) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00496}00496   \textcolor{keywordtype}{void} *msg = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00497}00497   \textcolor{keywordtype}{size\_t} len = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00498}00498   \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00499}00499     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__LowSaurion_gaec24df6ee2f4999bf64acf5fc42ed019}{read\_chunk}}(\&msg, \&len, req)) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00500}00500       \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00501}00501     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00502}00502     \textcolor{comment}{// Hay siguiente}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00503}00503     \textcolor{keywordflow}{if} (req-\/>\mbox{\hyperlink{structrequest_a4aba582d3fcf1110aa8f272d5b038a3d}{next\_iov}} || req-\/>\mbox{\hyperlink{structrequest_a03abde14b48986b40d827b22e4ddfb2d}{next\_offset}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00504}00504       \textcolor{keywordflow}{if} (s-\/>cb.on\_readed \&\& msg) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00505}00505         s-\/>cb.on\_readed(req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}, msg, len, s-\/>cb.on\_readed\_arg);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00506}00506       \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00507}00507       free(msg);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00508}00508       msg = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00509}00509       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00510}00510     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00511}00511     \textcolor{comment}{// Hay previo pero no se ha completado}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00512}00512     \textcolor{keywordflow}{if} (req-\/>\mbox{\hyperlink{structrequest_ab8f409ae411cecc817a691455830f700}{prev}} \&\& req-\/>\mbox{\hyperlink{structrequest_a02dc8e759c5216e1b7f7c908a0e0481f}{prev\_size}} \&\& req-\/>\mbox{\hyperlink{structrequest_acb69c014fb67502b59cd112d3758569f}{prev\_remain}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00513}00513       \mbox{\hyperlink{low__saurion_8c_ab40f6349969e5ce57e654ddb9eaf827a}{add\_read\_continue}}(s, req, \mbox{\hyperlink{low__saurion_8c_a7919e576d3fdccbefb75bee92abd5cc3}{next}}(s));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00514}00514       \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00515}00515     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00516}00516     \textcolor{comment}{// Hay un nico mensaje y se ha completado}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00517}00517     \textcolor{keywordflow}{if} (s-\/>cb.on\_readed \&\& msg) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00518}00518       s-\/>cb.on\_readed(req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}, msg, len, s-\/>cb.on\_readed\_arg);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00519}00519     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00520}00520     free(msg);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00521}00521     msg = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00522}00522     \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00523}00523   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00524}00524   \mbox{\hyperlink{low__saurion_8c_a2299a2be116729fdb774a5e655ff9f83}{add\_read}}(s, req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00525}00525 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00526}00526 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00527}\mbox{\hyperlink{low__saurion_8c_a94c77ae2935117db01e434b37204b649}{00527}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a94c77ae2935117db01e434b37204b649}{handle\_write}}(\textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keyword}{const} \textcolor{keywordtype}{int} fd) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00528}00528   \textcolor{keywordflow}{if} (s-\/>cb.on\_wrote) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00529}00529     s-\/>cb.on\_wrote(fd, s-\/>cb.on\_wrote\_arg);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00530}00530   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00531}00531 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00532}00532 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00533}\mbox{\hyperlink{low__saurion_8c_a79a329a1b1fcd31d446b309eb0d73849}{00533}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a79a329a1b1fcd31d446b309eb0d73849}{handle\_error}}(\textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structrequest}{request}} *\textcolor{keyword}{const} req) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00534}00534   \textcolor{keywordflow}{if} (s-\/>cb.on\_error) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00535}00535     \textcolor{keyword}{const} \textcolor{keywordtype}{char} *resp = \textcolor{stringliteral}{"{}ERROR"{}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00536}00536     s-\/>cb.on\_error(req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}, resp, (ssize\_t)strlen(resp), s-\/>cb.on\_error\_arg);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00537}00537   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00538}00538 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00539}00539 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00540}\mbox{\hyperlink{low__saurion_8c_a6590a961ce99bb8a6f0fdd151f394afa}{00540}} \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a6590a961ce99bb8a6f0fdd151f394afa}{handle\_close}}(\textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s, \textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structrequest}{request}} *\textcolor{keyword}{const} req) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00541}00541   \textcolor{keywordflow}{if} (s-\/>cb.on\_closed) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00542}00542     s-\/>cb.on\_closed(req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}}, s-\/>cb.on\_closed\_arg);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00543}00543   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00544}00544   close(req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00545}00545 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00546}00546 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00547}00547 \textcolor{comment}{/*********************************** INTERFACE ***********************************/}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00548}\mbox{\hyperlink{group__LowSaurion_ga4a0bc8233ca030e29b9b94aed0177392}{00548}} \textcolor{keywordtype}{int} \mbox{\hyperlink{group__LowSaurion_ga4a0bc8233ca030e29b9b94aed0177392}{EXTERNAL\_set\_socket}}(\textcolor{keyword}{const} \textcolor{keywordtype}{int} p) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00549}00549   \textcolor{keywordtype}{int} sock = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00550}00550   \textcolor{keyword}{struct }sockaddr\_in srv\_addr;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00551}00551 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00552}00552   sock = socket(PF\_INET, SOCK\_STREAM, 0);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00553}00553   \textcolor{keywordflow}{if} (sock < 1) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00554}00554     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00555}00555   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00556}00556 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00557}00557   \textcolor{keywordtype}{int} enable = 1;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00558}00558   \textcolor{keywordflow}{if} (setsockopt(sock, SOL\_SOCKET, SO\_REUSEADDR, \&enable, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00559}00559     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00560}00560   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00561}00561   \textcolor{keywordflow}{if} (setsockopt(sock, SOL\_SOCKET, SO\_REUSEPORT, \&enable, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int})) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00562}00562     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00563}00563   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00564}00564 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00565}00565   memset(\&srv\_addr, 0, \textcolor{keyword}{sizeof}(srv\_addr));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00566}00566   srv\_addr.sin\_family = AF\_INET;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00567}00567   srv\_addr.sin\_port = htons(p);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00568}00568   srv\_addr.sin\_addr.s\_addr = htonl(INADDR\_ANY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00569}00569 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00570}00570   \textcolor{comment}{/* We bind to a port and turn this socket into a listening}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00571}00571 \textcolor{comment}{   * socket.}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00572}00572 \textcolor{comment}{   * */}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00573}00573   \textcolor{keywordflow}{if} (bind(sock, (\textcolor{keyword}{const} \textcolor{keyword}{struct} sockaddr *)\&srv\_addr, \textcolor{keyword}{sizeof}(srv\_addr)) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00574}00574     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00575}00575   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00576}00576 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00577}00577   \textcolor{keywordflow}{if} (listen(sock, ACCEPT\_QUEUE) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00578}00578     \textcolor{keywordflow}{return} ERROR\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00579}00579   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00580}00580 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00581}00581   \textcolor{keywordflow}{return} sock;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00582}00582 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00583}00583 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00584}00584 [[nodiscard]]}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00585}\mbox{\hyperlink{group__LowSaurion_gae589ab08ed623ad2ab6d13beec33b131}{00585}} \textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion}{saurion}} *\mbox{\hyperlink{group__LowSaurion_gae589ab08ed623ad2ab6d13beec33b131}{saurion\_create}}(uint32\_t \mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00586}00586   \textcolor{comment}{// Asignar memoria}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00587}00587   \textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion}{saurion}} *p = (\textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion}{saurion}} *)malloc(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}}));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00588}00588   \textcolor{keywordflow}{if} (!p) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00589}00589     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00590}00590   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00591}00591   \textcolor{comment}{// Inicializar mutex}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00592}00592   \textcolor{keywordtype}{int} ret = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00593}00593   ret = pthread\_mutex\_init(\&p-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}}, NULL);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00594}00594   \textcolor{keywordflow}{if} (ret) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00595}00595     free(p);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00596}00596     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00597}00597   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00598}00598   ret = pthread\_cond\_init(\&p-\/>\mbox{\hyperlink{structsaurion_add5f25d5f709bda89fa5461eecdc2b2e}{status\_c}}, NULL);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00599}00599   \textcolor{keywordflow}{if} (ret) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00600}00600     free(p);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00601}00601     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00602}00602   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00603}00603   p-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}} = (pthread\_mutex\_t *)malloc(\mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}} * \textcolor{keyword}{sizeof}(pthread\_mutex\_t));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00604}00604   \textcolor{keywordflow}{if} (!p-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00605}00605     free(p);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00606}00606     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00607}00607   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00608}00608   \textcolor{keywordflow}{for} (uint32\_t i = 0; i < \mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}}; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00609}00609     pthread\_mutex\_init(\&(p-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[i]), NULL);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00610}00610   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00611}00611   \textcolor{comment}{// Inicializar miembros}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00612}00612   p-\/>\mbox{\hyperlink{structsaurion_ae85c8eed456efd00dcc93d005b0ad99c}{ss}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00613}00613   \mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}} = (\mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}} < 2 ? 2 : \mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00614}00614   \mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}} = (\mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}} > NUM\_CORES ? NUM\_CORES : \mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00615}00615   p-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}} = \mbox{\hyperlink{low__saurion_8h_a7001c0d6b3bf1fa114a0d230c6190e3d}{n\_threads}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00616}00616   p-\/>\mbox{\hyperlink{structsaurion_a342abf92b861ebc82e50349fe31246e2}{status}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00617}00617   p-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}} = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00618}00618   p-\/>cb.on\_connected = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00619}00619   p-\/>cb.on\_connected\_arg = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00620}00620   p-\/>cb.on\_readed = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00621}00621   p-\/>cb.on\_readed\_arg = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00622}00622   p-\/>cb.on\_wrote = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00623}00623   p-\/>cb.on\_wrote\_arg = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00624}00624   p-\/>cb.on\_closed = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00625}00625   p-\/>cb.on\_closed\_arg = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00626}00626   p-\/>cb.on\_error = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00627}00627   p-\/>cb.on\_error\_arg = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00628}00628   p-\/>\mbox{\hyperlink{structsaurion_a2742eddc30d4e4409b9f1a98cf7eb054}{next}} = 0;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00629}00629   \textcolor{comment}{// Inicializar efds}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00630}00630   p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}} = (\textcolor{keywordtype}{int} *)malloc(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}) * p-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00631}00631   \textcolor{keywordflow}{if} (!p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00632}00632     free(p-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00633}00633     free(p);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00634}00634     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00635}00635   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00636}00636   \textcolor{keywordflow}{for} (uint32\_t i = 0; i < p-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}}; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00637}00637     p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[i] = eventfd(0, EFD\_NONBLOCK);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00638}00638     \textcolor{keywordflow}{if} (p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[i] == ERROR\_CODE) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00639}00639       \textcolor{keywordflow}{for} (uint32\_t j = 0; j < i; ++j) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00640}00640         close(p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[j]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00641}00641       \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00642}00642       free(p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00643}00643       free(p-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00644}00644       free(p);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00645}00645       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00646}00646     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00647}00647   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00648}00648   \textcolor{comment}{// Inicializar rings}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00649}00649   p-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}} = (\textcolor{keyword}{struct }io\_uring *)malloc(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} io\_uring) * p-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00650}00650   \textcolor{keywordflow}{if} (!p-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00651}00651     \textcolor{keywordflow}{for} (uint32\_t j = 0; j < p-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}}; ++j) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00652}00652       close(p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[j]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00653}00653     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00654}00654     free(p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00655}00655     free(p-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00656}00656     free(p);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00657}00657     \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00658}00658   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00659}00659   \textcolor{keywordflow}{for} (uint32\_t i = 0; i < p-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}}; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00660}00660     memset(\&p-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[i], 0, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} io\_uring));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00661}00661     ret = io\_uring\_queue\_init(SAURION\_RING\_SIZE, \&p-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[i], 0);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00662}00662     \textcolor{keywordflow}{if} (ret) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00663}00663       \textcolor{keywordflow}{for} (uint32\_t j = 0; j < p-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}}; ++j) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00664}00664         close(p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[j]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00665}00665       \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00666}00666       free(p-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00667}00667       free(p-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00668}00668       free(p-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00669}00669       free(p);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00670}00670       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00671}00671     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00672}00672   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00673}00673   p-\/>\mbox{\hyperlink{structsaurion_aa6d22bb06ad66a5a860fcd642b4e7905}{pool}} = \mbox{\hyperlink{cthreadpool_8cpp_a7050a8290c4fd93b7091f84097f4c1c0}{ThreadPool\_create}}(p-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00674}00674   \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00675}00675 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00676}00676 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00677}\mbox{\hyperlink{low__saurion_8c_a30bb7d15272a20fb689bf9fada1737fa}{00677}} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a30bb7d15272a20fb689bf9fada1737fa}{saurion\_worker\_master}}(\textcolor{keywordtype}{void} *arg) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00678}00678   \textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s = (\textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion}{saurion}} *)arg;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00679}00679   \textcolor{keyword}{struct }io\_uring ring = s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[0];}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00680}00680   \textcolor{keyword}{struct }io\_uring\_cqe *cqe = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00681}00681   \textcolor{keyword}{struct }sockaddr\_in client\_addr;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00682}00682   socklen\_t client\_addr\_len = \textcolor{keyword}{sizeof}(client\_addr);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00683}00683 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00684}00684   \mbox{\hyperlink{low__saurion_8c_a2794e5aada66af40962e04b938bbd88a}{add\_efd}}(s, s-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[0], 0);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00685}00685   \mbox{\hyperlink{low__saurion_8c_a40aa700cf97b0ad654fe0aff06644ae9}{add\_accept}}(s, \&client\_addr, \&client\_addr\_len);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00686}00686 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00687}00687   pthread\_mutex\_lock(\&s-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00688}00688   s-\/>\mbox{\hyperlink{structsaurion_a342abf92b861ebc82e50349fe31246e2}{status}} = 1;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00689}00689   pthread\_cond\_signal(\&s-\/>\mbox{\hyperlink{structsaurion_add5f25d5f709bda89fa5461eecdc2b2e}{status\_c}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00690}00690   pthread\_mutex\_unlock(\&s-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00691}00691   \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00692}00692     \textcolor{keywordtype}{int} ret = io\_uring\_wait\_cqe(\&ring, \&cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00693}00693     \textcolor{keywordflow}{if} (ret < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00694}00694       free(cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00695}00695       \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00696}00696     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00697}00697     \textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *req = (\textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *)cqe-\/>user\_data;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00698}00698     if (!req) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00699}00699       io\_uring\_cqe\_seen(\&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[0], cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00700}00700       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00701}00701     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00702}00702     \textcolor{keywordflow}{if} (cqe-\/>res < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00703}00703       \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00704}00704       \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00705}00705     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00706}00706     \textcolor{keywordflow}{if} (req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}} == s-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[0]) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00707}00707       io\_uring\_cqe\_seen(\&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[0], cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00708}00708       \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00709}00709       \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00710}00710     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00711}00711     \textcolor{comment}{/* Mark this request as processed */}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00712}00712     io\_uring\_cqe\_seen(\&s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[0], cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00713}00713     \textcolor{keywordflow}{switch} (req-\/>\mbox{\hyperlink{structrequest_a9cba15f1748716ffe6869a271c1ccc4d}{event\_type}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00714}00714       \textcolor{keywordflow}{case} \mbox{\hyperlink{low__saurion_8c_a96a7a2db32d44325af7e4db5fe599675}{EVENT\_TYPE\_ACCEPT}}:}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00715}00715         \mbox{\hyperlink{low__saurion_8c_aff870d06aed2384abd16b89b4e6429d8}{handle\_accept}}(s, cqe-\/>res);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00716}00716         \mbox{\hyperlink{low__saurion_8c_a40aa700cf97b0ad654fe0aff06644ae9}{add\_accept}}(s, \&client\_addr, \&client\_addr\_len);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00717}00717         \mbox{\hyperlink{low__saurion_8c_a2299a2be116729fdb774a5e655ff9f83}{add\_read}}(s, cqe-\/>res);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00718}00718         \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00719}00719         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00720}00720       \textcolor{keywordflow}{case} \mbox{\hyperlink{low__saurion_8c_a1f7c29ac665cde9aa26808bb269837d9}{EVENT\_TYPE\_READ}}:}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00721}00721         \textcolor{keywordflow}{if} (cqe-\/>res < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00722}00722           \mbox{\hyperlink{low__saurion_8c_a79a329a1b1fcd31d446b309eb0d73849}{handle\_error}}(s, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00723}00723         \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00724}00724         \textcolor{keywordflow}{if} (cqe-\/>res < 1) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00725}00725           \mbox{\hyperlink{low__saurion_8c_a6590a961ce99bb8a6f0fdd151f394afa}{handle\_close}}(s, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00726}00726         \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00727}00727         \textcolor{keywordflow}{if} (cqe-\/>res > 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00728}00728           \mbox{\hyperlink{low__saurion_8c_a97aee33e3c5728a7d986b2f42e7bb82a}{handle\_read}}(s, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00729}00729         \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00730}00730         \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00731}00731         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00732}00732       \textcolor{keywordflow}{case} \mbox{\hyperlink{low__saurion_8c_a387dc1b3761c4fd9e9b40030bc5b78c8}{EVENT\_TYPE\_WRITE}}:}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00733}00733         \mbox{\hyperlink{low__saurion_8c_a94c77ae2935117db01e434b37204b649}{handle\_write}}(s, req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00734}00734         \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00735}00735         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00736}00736     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00737}00737   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00738}00738   pthread\_mutex\_lock(\&s-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00739}00739   s-\/>\mbox{\hyperlink{structsaurion_a342abf92b861ebc82e50349fe31246e2}{status}} = 2;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00740}00740   pthread\_cond\_signal(\&s-\/>\mbox{\hyperlink{structsaurion_add5f25d5f709bda89fa5461eecdc2b2e}{status\_c}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00741}00741   pthread\_mutex\_unlock(\&s-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00742}00742   \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00743}00743 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00744}00744 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00745}\mbox{\hyperlink{low__saurion_8c_a70abc87ee43c0e1b7059ec16e975afca}{00745}} \textcolor{keywordtype}{void} \mbox{\hyperlink{low__saurion_8c_a70abc87ee43c0e1b7059ec16e975afca}{saurion\_worker\_slave}}(\textcolor{keywordtype}{void} *arg) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00746}00746   \textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion__wrapper}{saurion\_wrapper}} *\textcolor{keyword}{const} \mbox{\hyperlink{low__saurion_8h_a9a57016e056d7d2ce6d2417340c4429e}{ss}} = (\textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion__wrapper}{saurion\_wrapper}} *)arg;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00747}00747   \textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion}{saurion}} *s = \mbox{\hyperlink{low__saurion_8h_a9a57016e056d7d2ce6d2417340c4429e}{ss}}-\/>s;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00748}00748   \textcolor{keyword}{const} \textcolor{keywordtype}{int} sel = \mbox{\hyperlink{low__saurion_8h_a9a57016e056d7d2ce6d2417340c4429e}{ss}}-\/>sel;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00749}00749   free(\mbox{\hyperlink{low__saurion_8h_a9a57016e056d7d2ce6d2417340c4429e}{ss}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00750}00750   \textcolor{keyword}{struct }io\_uring ring = s-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[sel];}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00751}00751   \textcolor{keyword}{struct }io\_uring\_cqe *cqe = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00752}00752 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00753}00753   \mbox{\hyperlink{low__saurion_8c_a2794e5aada66af40962e04b938bbd88a}{add\_efd}}(s, s-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[sel], sel);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00754}00754 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00755}00755   pthread\_mutex\_lock(\&s-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00756}00756   s-\/>\mbox{\hyperlink{structsaurion_a342abf92b861ebc82e50349fe31246e2}{status}} = 1;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00757}00757   pthread\_cond\_signal(\&s-\/>\mbox{\hyperlink{structsaurion_add5f25d5f709bda89fa5461eecdc2b2e}{status\_c}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00758}00758   pthread\_mutex\_unlock(\&s-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00759}00759   \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00760}00760     \textcolor{keywordtype}{int} ret = io\_uring\_wait\_cqe(\&ring, \&cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00761}00761     \textcolor{keywordflow}{if} (ret < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00762}00762       free(cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00763}00763       \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00764}00764     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00765}00765     \textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *req = (\textcolor{keyword}{struct }\mbox{\hyperlink{structrequest}{request}} *)cqe-\/>user\_data;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00766}00766     if (!req) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00767}00767       io\_uring\_cqe\_seen(\&ring, cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00768}00768       \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00769}00769     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00770}00770     \textcolor{keywordflow}{if} (cqe-\/>res < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00771}00771       \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00772}00772       \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00773}00773     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00774}00774     \textcolor{keywordflow}{if} (req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}} == s-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[sel]) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00775}00775       io\_uring\_cqe\_seen(\&ring, cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00776}00776       \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00777}00777       \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00778}00778     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00779}00779     \textcolor{comment}{/* Mark this request as processed */}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00780}00780     io\_uring\_cqe\_seen(\&ring, cqe);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00781}00781     \textcolor{keywordflow}{switch} (req-\/>\mbox{\hyperlink{structrequest_a9cba15f1748716ffe6869a271c1ccc4d}{event\_type}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00782}00782       \textcolor{keywordflow}{case} \mbox{\hyperlink{low__saurion_8c_a1f7c29ac665cde9aa26808bb269837d9}{EVENT\_TYPE\_READ}}:}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00783}00783         \textcolor{keywordflow}{if} (cqe-\/>res < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00784}00784           \mbox{\hyperlink{low__saurion_8c_a79a329a1b1fcd31d446b309eb0d73849}{handle\_error}}(s, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00785}00785         \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00786}00786         \textcolor{keywordflow}{if} (cqe-\/>res < 1) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00787}00787           \mbox{\hyperlink{low__saurion_8c_a6590a961ce99bb8a6f0fdd151f394afa}{handle\_close}}(s, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00788}00788         \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00789}00789         \textcolor{keywordflow}{if} (cqe-\/>res > 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00790}00790           \mbox{\hyperlink{low__saurion_8c_a97aee33e3c5728a7d986b2f42e7bb82a}{handle\_read}}(s, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00791}00791         \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00792}00792         \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00793}00793         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00794}00794       \textcolor{keywordflow}{case} \mbox{\hyperlink{low__saurion_8c_a387dc1b3761c4fd9e9b40030bc5b78c8}{EVENT\_TYPE\_WRITE}}:}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00795}00795         \mbox{\hyperlink{low__saurion_8c_a94c77ae2935117db01e434b37204b649}{handle\_write}}(s, req-\/>\mbox{\hyperlink{structrequest_a34dcdf74ea1d647ba95bcdd78c95c3b7}{client\_socket}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00796}00796         \mbox{\hyperlink{linked__list_8c_aa32b1822e1be57484b2244e42f1d75ac}{list\_delete\_node}}(\&s-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}}, req);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00797}00797         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00798}00798     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00799}00799   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00800}00800   pthread\_mutex\_lock(\&s-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00801}00801   s-\/>\mbox{\hyperlink{structsaurion_a342abf92b861ebc82e50349fe31246e2}{status}} = 2;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00802}00802   pthread\_cond\_signal(\&s-\/>\mbox{\hyperlink{structsaurion_add5f25d5f709bda89fa5461eecdc2b2e}{status\_c}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00803}00803   pthread\_mutex\_unlock(\&s-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00804}00804   \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00805}00805 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00806}00806 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00807}00807 [[nodiscard]]}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00808}\mbox{\hyperlink{group__LowSaurion_gaeeab8302b41112175566881a1b7bf905}{00808}} \textcolor{keywordtype}{int} \mbox{\hyperlink{group__LowSaurion_gaeeab8302b41112175566881a1b7bf905}{saurion\_start}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} s) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00809}00809   pthread\_mutex\_init(\&\mbox{\hyperlink{low__saurion_8c_adcba6f6935d1807493e731cc5e79a661}{print\_mutex}}, NULL);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00810}00810   \mbox{\hyperlink{cthreadpool_8cpp_a167313573a42e919a34b17a9cf533678}{ThreadPool\_init}}(s-\/>\mbox{\hyperlink{structsaurion_aa6d22bb06ad66a5a860fcd642b4e7905}{pool}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00811}00811   \mbox{\hyperlink{cthreadpool_8cpp_a29da21779e6052eb5dea1707ef6e8fa8}{ThreadPool\_add\_default}}(s-\/>\mbox{\hyperlink{structsaurion_aa6d22bb06ad66a5a860fcd642b4e7905}{pool}}, \mbox{\hyperlink{low__saurion_8c_a30bb7d15272a20fb689bf9fada1737fa}{saurion\_worker\_master}}, s);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00812}00812   \textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion__wrapper}{saurion\_wrapper}} *\mbox{\hyperlink{low__saurion_8h_a9a57016e056d7d2ce6d2417340c4429e}{ss}} = NULL;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00813}00813   \textcolor{keywordflow}{for} (uint32\_t i = 1; i < \mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}}; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00814}00814     \mbox{\hyperlink{low__saurion_8h_a9a57016e056d7d2ce6d2417340c4429e}{ss}} = (\textcolor{keyword}{struct }\mbox{\hyperlink{structsaurion__wrapper}{saurion\_wrapper}} *)malloc(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion__wrapper}{saurion\_wrapper}}));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00815}00815     \mbox{\hyperlink{low__saurion_8h_a9a57016e056d7d2ce6d2417340c4429e}{ss}}-\/>s = \mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}};}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00816}00816     \mbox{\hyperlink{low__saurion_8h_a9a57016e056d7d2ce6d2417340c4429e}{ss}}-\/>sel = i;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00817}00817     \mbox{\hyperlink{cthreadpool_8cpp_a29da21779e6052eb5dea1707ef6e8fa8}{ThreadPool\_add\_default}}(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_aa6d22bb06ad66a5a860fcd642b4e7905}{pool}}, \mbox{\hyperlink{low__saurion_8c_a70abc87ee43c0e1b7059ec16e975afca}{saurion\_worker\_slave}}, \mbox{\hyperlink{low__saurion_8h_a9a57016e056d7d2ce6d2417340c4429e}{ss}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00818}00818   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00819}00819   \textcolor{keywordflow}{return} SUCCESS\_CODE;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00820}00820 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00821}00821 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00822}\mbox{\hyperlink{group__LowSaurion_ga9f32b41ec23178c2a693fec057b96532}{00822}} \textcolor{keywordtype}{void} \mbox{\hyperlink{group__LowSaurion_ga9f32b41ec23178c2a693fec057b96532}{saurion\_stop}}(\textcolor{keyword}{const} \textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} \mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00823}00823   uint64\_t u = 1;}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00824}00824   \textcolor{keywordflow}{for} (uint32\_t i = 0; i < \mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}}; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00825}00825     \textcolor{keywordflow}{while} (write(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[i], \&u, \textcolor{keyword}{sizeof}(u)) < 0) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00826}00826       usleep(TIMEOUT\_RETRY);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00827}00827     \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00828}00828   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00829}00829   \mbox{\hyperlink{cthreadpool_8cpp_a69d71a6f02edfe47deb07aedf33c9d90}{ThreadPool\_wait\_empty}}(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_aa6d22bb06ad66a5a860fcd642b4e7905}{pool}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00830}00830 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00831}00831 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00832}\mbox{\hyperlink{group__LowSaurion_ga7893ccf90a98845d5d95ffda0260d0b8}{00832}} \textcolor{keywordtype}{void} \mbox{\hyperlink{group__LowSaurion_ga7893ccf90a98845d5d95ffda0260d0b8}{saurion\_destroy}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} \mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00833}00833   pthread\_mutex\_lock(\&\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00834}00834   \textcolor{keywordflow}{while} (\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_a342abf92b861ebc82e50349fe31246e2}{status}} == 1) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00835}00835     pthread\_cond\_wait(\&\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_add5f25d5f709bda89fa5461eecdc2b2e}{status\_c}}, \&\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00836}00836   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00837}00837   pthread\_mutex\_unlock(\&\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00838}00838   \mbox{\hyperlink{cthreadpool_8cpp_af203df90cae013853d5dde106517ae1d}{ThreadPool\_destroy}}(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_aa6d22bb06ad66a5a860fcd642b4e7905}{pool}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00839}00839   \textcolor{keywordflow}{for} (uint32\_t i = 0; i < \mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}}; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00840}00840     io\_uring\_queue\_exit(\&\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}}[i]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00841}00841     pthread\_mutex\_destroy(\&\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}}[i]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00842}00842   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00843}00843   free(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_ad3305571e32bbb72bc95caefbb68b030}{m\_rings}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00844}00844   \mbox{\hyperlink{linked__list_8c_ac33c30e895caddc11181b50eca0ab735}{list\_free}}(\&\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_a63c38a9dc703180b628935d72236318f}{list}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00845}00845   \textcolor{keywordflow}{for} (uint32\_t i = 0; i < \mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_aee308efd9e70f3b38da24483a3f74413}{n\_threads}}; ++i) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00846}00846     close(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}}[i]);}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00847}00847   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00848}00848   free(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_a08e1b7aa083a0d311658ff7072ae7a46}{efds}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00849}00849   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_ae85c8eed456efd00dcc93d005b0ad99c}{ss}}) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00850}00850     close(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_ae85c8eed456efd00dcc93d005b0ad99c}{ss}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00851}00851   \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00852}00852   free(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_a4858f070287e6269298089b993793830}{rings}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00853}00853   pthread\_mutex\_destroy(\&\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_ad05334ffef73d89577b3bc60ecc11283}{status\_m}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00854}00854   pthread\_cond\_destroy(\&\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}-\/>\mbox{\hyperlink{structsaurion_add5f25d5f709bda89fa5461eecdc2b2e}{status\_c}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00855}00855   free(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}});}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00856}00856 \}}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00857}00857 }
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00858}\mbox{\hyperlink{group__LowSaurion_gadd63cf225e55bcf4cd22ddcbd9d1c9b7}{00858}} \textcolor{keywordtype}{void} \mbox{\hyperlink{group__LowSaurion_gadd63cf225e55bcf4cd22ddcbd9d1c9b7}{saurion\_send}}(\textcolor{keyword}{struct} \mbox{\hyperlink{structsaurion}{saurion}} *\textcolor{keyword}{const} \mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}, \textcolor{keyword}{const} \textcolor{keywordtype}{int} fd, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *\textcolor{keyword}{const} msg) \{}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00859}00859   \mbox{\hyperlink{low__saurion_8c_a39042ff39576b4db8db514acd6e9a224}{add\_write}}(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}, fd, msg, \mbox{\hyperlink{low__saurion_8c_a7919e576d3fdccbefb75bee92abd5cc3}{next}}(\mbox{\hyperlink{structsaurion__wrapper_a56c88c88fc583f95d6f144ee3414458d}{s}}));}
\DoxyCodeLine{\Hypertarget{low__saurion_8c_source_l00860}00860 \}}

\end{DoxyCode}
